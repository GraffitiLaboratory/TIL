### 코드베이스 구하기

ASLR 환경에서 PIE가 적용된 바이너리는 실행될 때마다 다른 주소에 적재된다.
그래서 코드 영역의 가젯을 사용하거나 데이터 영역에 접근하려면 바이너리가 적재된 주소를 알아야 한다.
이 주소를 PIE 베이스 또는 코드 베이스 라고 부른다.
코드 베이스를 구하려면 라이브러리의 베이스 주소를 구할 때처럼 코드 영역의 임의 주소를 읽고, 그 주소에서 오프셋을 빼야 한다.

### Partial Overwrite

코드 베이스를 구하기 어렵다면 반환 주소(Return Address)의 일부 바이트만 덮는 공격을 고려해 볼 수도 있다. 이러한 공격 기법을 Partial Overwrite 라고 부른다.
일반적으로 함수의 반환주소는 호출 함수(Caller)의 내부를 가리킨다. 특정 함수의 호출관계는 정적 분석 또는 동적 분석으로 쉽게 확인할 수 있으므로 공격자는 반환 주소를 예측할 수 있다.

ASLR의 특성 상, 코드 영역의 주소도 하위 12비트 값은 항상 같다.
따라서 사용하려는 코드 가젯의 주소가 반환 주소와 하위 한 바이트만 다르다면, 이 값만 덮어서 원하는 코드를 실행 시킬 수 있다. 
그러나 만약 두 바이트 이상이 다른 주소로 실행 흐름을 옮기고자 한다면, ASLR로 뒤섞이는 주소를 맞춰야하므로 브루트 포싱이 필요하며, 공격이 확률에 따라 성공하게 된다.